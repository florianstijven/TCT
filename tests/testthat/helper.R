library(dplyr)
# Example data set transformed to format required by TCT_meta()
data_test = simulated_test_trial %>%
  dplyr::mutate(
    time_int = (Week %/% 25) + 1,
    arm_time = ifelse(time_int == 1L,
                      "baseline",
                      paste0(arm, ":", time_int))
  )
# Fit a MMRM model to the data set. The parameter estimates of this model form
# the basis to perform the time component tests.
mmrm_fit = analyze_mmrm(data_test,
                        package = "mmrm",
                        method = "REML",
                        type = "full")
# The mmrm_fit object is used throughout the tests.
ctrl_estimates = c(22.54400, 22.94566, 25.59426, 28.75138, 30.59822)
exp_estimates = c(22.65434, 24.76974, 26.88062, 28.76178)
vcov_mmrm = matrix(
            c(0.1469771, 0.1355324, 0.1452973, 0.1482507, 0.1563310, 0.1355324, 0.1452973, 0.1482507, 0.1563310,
              0.1355324, 0.2449994, 0.2414595, 0.2829998, 0.3169482, 0.1249790, 0.1339835, 0.1367069, 0.1441580,
              0.1452973, 0.2414595, 0.3659638, 0.3868296, 0.4502729, 0.1339835, 0.1436368, 0.1465565, 0.1545444,
              0.1482507, 0.2829998, 0.3868296, 0.5367493, 0.5816798, 0.1367069, 0.1465565, 0.1495355, 0.1576857,
              0.1563310, 0.3169482, 0.4502729, 0.5816798, 0.7389635, 0.1441580, 0.1545444, 0.1576857, 0.1662802,
              0.1355324, 0.1249790, 0.1339835, 0.1367069, 0.1441580, 0.2449994, 0.2414595, 0.2829998, 0.3169482,
              0.1452973, 0.1339835, 0.1436368, 0.1465565, 0.1545444, 0.2414595, 0.3659638, 0.3868296, 0.4502729,
              0.1482507, 0.1367069, 0.1465565, 0.1495355, 0.1576857, 0.2829998, 0.3868296, 0.5367493, 0.5816798,
              0.1563310, 0.1441580, 0.1545444, 0.1576857, 0.1662802, 0.3169482, 0.4502729, 0.5816798, 0.7389635),
            nrow = 9, ncol = 9, byrow = TRUE)
